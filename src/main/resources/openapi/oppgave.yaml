openapi: 3.0.1
info:
  title: Oppgave API
  description: |+
    Dokumentasjon av ressurser som er eksponert av Oppgave

    Konsumenter har ansvar for å ivareta behandlingsgrunnlag/hjemmel ved bruk av APIet og kun forholde seg til oppgaver (i.e basert på tema) som sikrer at dette blir ivaretatt.
    Tilgang gis ved PR. Bruk av on-prem STS skal fases ut, så nye tilganger godkjennes kun for AAD.

    Token hentes enten vha azure-token-generator, eller ida. Testbrukere må ha rollen 0000_GA_GOSYS_NASJONAL for å få tilgang til oppgaver.

    Vi forventer at konsumenter følger tolerant reader-prinsippet (kun lese feltene man benytter, ignorere resten), da vi ved ved behov vil utvide APIet. Det vil nok
    etter hvert også komme en v2 av APIet der vi tar bort en del legacy-mekanismer. I mellomtiden har vi skjult noen mekanismer som vi anser som deprecated i swagger-doken, slik at
    den blir mer oversiktelig.

    Merk at vi forventer at Headeren <strong>"X-Correlation-ID"</strong> er angitt for alle tjenestekall. Denne logges i applikasjonen, og benyttes for å kunne sammenstille hendelser på tvers av kallkjeder.
    Denne skal være unik for hvert tjenestekall, og oppgis når Team oppgavehåndtering skal bistå i feilsøk, analyse etc.

  contact:
    name: Team Oppgavehåndtering
  version: "1"
tags:
- name: Oppgave
- name: Mappe
  description: Operasjoner på mapper
paths:
  /api/v1/oppgaver/kafka:
    post:
      operationId: publiserKafkahendelser
      responses:
        default:
          description: default response
          content:
            application/json: {}
  /api/v1/kodeverk/tema:
    get:
      tags:
      - Kodeverk
      summary: Henter alle gyldige oppgave-temaer
      operationId: hentAlleTemaer
      parameters:
      - name: X-Correlation-ID
        in: header
        required: true
        schema:
          type: string
      responses:
        "200":
          description: Temaer hentet
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Tema'
        "401":
          description: Konsument mangler gyldig token
        "403":
          description: Bruker er ikke autorisert for denne operasjonen
        "500":
          description: Ukjent feilsituasjon har oppstått
      security:
      - oidc: []
  /api/v1/kodeverk/gjelder/{tema}:
    get:
      tags:
      - Kodeverk
      summary: Henter tilgjengelige gjelderverdier for angitt tema
      description: |
        Denne er publisert for å synligjøre tillatte verdier for et gitt tema.
        Tillatte verdier defineres av fagansvarlig for det aktuelle temaet. Merk forøvrig at
        disse verdiene gjerne har et spesifikt formål, og egne regler for når de skal benyttes som ikke
        fremkommer her. APIet vil bli endret, og bør ikke konsumeres av applikasjoner.
      operationId: hentGjelderverdierForTema
      parameters:
      - name: X-Correlation-ID
        in: header
        required: true
        schema:
          type: string
      - name: tema
        in: path
        required: true
        schema:
          type: string
      responses:
        "200":
          description: Gjelderverdier hentet
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Gjelder'
        "401":
          description: Konsument mangler gyldig token
        "403":
          description: Bruker er ikke autorisert for denne operasjonen
        "500":
          description: Ukjent feilsituasjon har oppstått
      security:
      - oidc: []
  /api/v1/kodeverk/oppgavetype/{tema}:
    get:
      tags:
      - Kodeverk
      summary: Henter tilgjengelige oppgavetyper for angitt tema
      description: |
        Denne er publisert for å synligjøre tillatte verdier for et gitt tema.
        Tillatte verdier defineres av fagansvarlig for det aktuelle temaet. Merk forøvrig at
        oppgavetyper gjerne har et spesifikt formål, og egne regler for når de skal benyttes som ikke
        fremkommer her. APIet vil bli endret, og bør ikke konsumeres av applikasjoner
      operationId: hentOppgavetyperForTema
      parameters:
      - name: X-Correlation-ID
        in: header
        required: true
        schema:
          type: string
      - name: tema
        in: path
        required: true
        schema:
          type: string
      responses:
        "200":
          description: Oppgavetyper hentet
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Oppgavetype'
        "401":
          description: Konsument mangler gyldig token
        "403":
          description: Bruker er ikke autorisert for denne operasjonen
        "500":
          description: Ukjent feilsituasjon har oppstått
      security:
      - oidc: []
  /api/v1/oppgaver/{id}/kommentarer:
    get:
      tags:
      - Oppgave
      summary: Henter kommentarer for oppgaven
      description: "Dette er en ny tjeneste for uthenting av strukturerte kommentarer,\
        \ som tilbys ifm arbeid med å fase ut bruken av beskrivelse/beskrivelseshistorikk.\
        \ I produksjon er feltet populert med data fra litt før 01.01.2024.Vi anbefaler\
        \ konsumenter å avvente noe med å ta dette i bruk, da det finnes et stort\
        \ antall oppgaver som fremdeles ikke vil inneha data her (kun i beskrivelse)Vi\
        \ arbeider videre med hvordan vi best mulig skal få gjennomført den øvrige\
        \ migreringen, men det vil være til stor hjelp om dere som i dag registrerer\
        \ kommentarer/statusoppdateringer i beskrivelsesfeltet også begynner å sende\
        \ inn kommentar ifm oppdatering av oppgaven ( i første om gang i tillegg til\
        \ beskrivelsen). Et stort antall av kommmentarene parses i dag fra differansen\
        \ av forrige og innsendt beskrivelse, og dette ønsker vi slutte med. Ta kontakt\
        \ med oss dersom dere har gjort dette, slik at vi kan skru av beskrivelsesparsingen\
        \ for deres app"
      operationId: hentKommentarer
      parameters:
      - name: X-Correlation-ID
        in: header
        required: true
        schema:
          type: string
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "204":
          description: Kommentar registrert
        "400":
          description: Ugyldig input
        "401":
          description: Konsument mangler gyldig token
        "403":
          description: Bruker er ikke autorisert for denne operasjonen
        "500":
          description: Ukjent feilsituasjon har oppstått i Oppgave
      security:
      - oidc: []
  /api/v1/mapper:
    get:
      tags:
      - Mappe
      summary: Søk etter mapper
      description: Finner mapper som passer søkekriterie
      operationId: finnMapper
      parameters:
      - name: X-Correlation-ID
        in: header
        required: true
        schema:
          type: string
      - name: tema
        in: query
        description: "Filtrering på tema. Benyttes for å skille mellom mapper i Gosys,\
          \ Pesys, Bisys"
        schema:
          type: array
          items:
            type: string
        example: PEN
      - name: enhetsnr
        in: query
        description: Filtrering på enhet
        schema:
          type: string
        example: "0100"
      - name: offset
        in: query
        description: Offset for paginering i søk
        schema:
          type: integer
          format: int64
        example: 10
      - name: limit
        in: query
        description: Begrensning i antall returnerte mapper
        schema:
          maximum: 5000
          type: integer
          format: int64
          default: 10
        example: 10
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HentMapperResponse'
        "400":
          description: Ugyldig input
        "401":
          description: Konsument mangler gyldig token
        "403":
          description: Bruker er ikke autorisert for denne operasjonen
        "500":
          description: Ukjent feilsituasjon har oppstått i Oppgave
      security:
      - oidc: []
  /api/v1/mapper/{id}:
    get:
      tags:
      - Mappe
      summary: Hent mappe
      description: Henter en eksisterende mappe
      operationId: hentMappe
      parameters:
      - name: X-Correlation-ID
        in: header
        required: true
        schema:
          type: string
      - name: id
        in: path
        description: Mappen som skal hentes
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Mappe'
        "401":
          description: Konsument mangler gyldig token
        "403":
          description: Bruker er ikke autorisert for denne operasjonen
        "404":
          description: Det finnes ingen mappe for angitt id
        "409":
          description: Konflikt
        "500":
          description: Ukjent feilsituasjon har oppstått i Oppgave
      security:
      - oidc: []
  /api/v1/oppgaver:
    get:
      tags:
      - Oppgave
      summary: Søk etter oppgaver
      operationId: finnOppgaver
      parameters:
      - name: X-Correlation-ID
        in: header
        description: UUID for feilsøk på tvers av tjenester
        required: true
        schema:
          type: string
        example: 26b40001-6e93-4678-8d90-f15a99941d52
      - name: statuskategori
        in: query
        description: "Statuskategori er en kategorisering av statuser internt i oppgave,\
          \ dvs at det kan søkes på enten AAPEN eller AVSLUTTET og de relevante oppgave\
          \ vil returneres uten at konsument trenger å spesifisere alle statuser som\
          \ representerer åpne oppgaver eller motsatt (avsluttede oppgaver)"
        schema:
          type: string
        example: AAPEN
      - name: tema
        in: query
        description: Filtrering på aktuelle tema (iht felles kodeverk)
        schema:
          type: array
          items:
            type: string
      - name: oppgavetype
        in: query
        description: Filtrering på aktuelle oppgavetyper (iht felles kodeverk)
        schema:
          type: array
          items:
            type: string
      - name: tildeltEnhetsnr
        in: query
        description: "Filtrering på tildelt enhet, enheten som har fått overført oppgaven\
          \ til behandling"
        schema:
          type: string
      - name: tilordnetRessurs
        in: query
        description: Hvilken ressurs (nav-ident) oppgaven er tilordnet
        schema:
          type: string
      - name: behandlingstema
        in: query
        description: Filtrering på behandlingstema (iht felles kodeverk)
        schema:
          type: string
      - name: behandlingstype
        in: query
        description: Filtrering på behandlingstype (iht felles kodeverk)
        schema:
          type: string
      - name: aktoerId
        in: query
        description: "For å hente oppgaver knyttet til en gitt personbruker. 13-sifret\
          \ aktørid (fnr,dnr,npid kan veksles via PDL)"
        schema:
          type: array
          items:
            type: string
      - name: journalpostId
        in: query
        description: Angir journalpostId (fra arkivet/joark) oppgaven er knyttet til
        schema:
          type: array
          items:
            type: string
      - name: saksreferanse
        in: query
        description: Søk etter oppgaver med angitt(e) saksreferanse(r)
        schema:
          type: array
          items:
            type: string
      - name: ferdigstiltFom
        in: query
        description: Nedre grense for filtrering på ferdigstilt tidspunkt
        schema:
          type: string
          format: yyyy-MM-ddThh:mm:ss
      - name: ferdigstiltTom
        in: query
        description: Øvre grense for filtrering på ferdigstilt tidspunkt
        schema:
          type: string
          format: yyyy-MM-ddThh:mm:ss
      - name: orgnr
        in: query
        description: Orgnr til organisasjonen oppgavene er opprettet for
        schema:
          type: array
          items:
            type: string
      - name: limit
        in: query
        description: Begrensning i antall returnerte oppgaver
        schema:
          maximum: 1000
          type: integer
          format: int64
          default: 10
        example: 10
      - name: offset
        in: query
        description: Offset for paginering i søk
        schema:
          type: integer
          format: int64
        example: 0
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SokOppgaverResponse'
        "400":
          description: Ugyldig input
        "401":
          description: Konsument mangler gyldig token
        "403":
          description: Bruker er ikke autorisert for denne operasjonen
        "500":
          description: Ukjent feilsituasjon har oppstått i Oppgave
      security:
      - oidc: []
    post:
      tags:
      - Oppgave
      summary: Opprett en ny oppgave
      description: Oppretter en ny oppgave
      operationId: opprettOppgave
      parameters:
      - name: X-Correlation-ID
        in: header
        description: UUID for feilsøk på tvers av tjenester
        required: true
        schema:
          type: string
        example: 26b40001-6e93-4678-8d90-f15a99941d52
      requestBody:
        description: "Eksempel på oppgaven en journalføringsoppgave. Merk at disse\
          \ som hovedregel alltid skal kategoriseres med behandlingstema og/eller\
          \ behandlingstype iht hvilken kategorisering som samsvarer med brevkoden.\
          \ For å se alle tillatte felt, trykk \"Schema\""
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OpprettOppgaveRequest'
            example:
              aktoerId: "2280720130426"
              journalpostId: "437723027"
              tema: KON
              behandlingstype: ae0004
              oppgavetype: JFR
              prioritet: NORM
              aktivDato: 2023-01-01
        required: true
      responses:
        "201":
          description: Oppgave opprettet
          headers:
            location:
              description: Angir URI til den opprettede oppgaven
              style: simple
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Oppgave'
              example:
                id: 357034437
                aktoerId: "2280720130426"
                tildeltEnhetsnr: "4863"
                journalpostId: "437723027"
                tema: KON
                behandlingstype: ae0004
                oppgavetype: JFR
                versjon: 1
                opprettetAv: Z991459
                prioritet: NORM
                status: OPPRETTET
                metadata: {}
                aktivDato: 2023-01-01
                opprettetTidspunkt: 2023-03-15T11:33:42.747+01:00
        "400":
          description: Ugyldig request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Konsument mangler gyldig token
        "403":
          description: Bruker er ikke autorisert for denne operasjonen
        "500":
          description: Ukjent feilsituasjon har oppstått i Oppgave
      security:
      - oidc: []
  /api/v1/oppgaver/{oppgaveId}/hendelser:
    get:
      tags:
      - Oppgave
      summary: Hent  endringshendelser knyttet til en oppgave
      description: "Henter endringshendelser tilknyttet en oppgave på strukturert\
        \ format (i motsetning til endringer som typisk har vært registrert i beskrivelesfeltet).\
        \ For meta som tradisjonelt har vært lagt i beskrivelsen, har vi lang historikk.\
        \ Vi har imidlertid nylig utvidet med en god del øvrige felter, så konsument\
        \ må ta høyde for at felter kan være uten verdi for eldre oppgaver"
      operationId: hentHendelser
      parameters:
      - name: X-Correlation-ID
        in: header
        description: UUID for feilsøk på tvers av tjenester
        required: true
        schema:
          type: string
        example: 26b40001-6e93-4678-8d90-f15a99941d52
      - name: oppgaveId
        in: path
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: Liste over hendelser
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HendelseJson'
        "400":
          description: Ugyldig request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Konsument mangler gyldig token
        "403":
          description: Bruker er ikke autorisert for denne operasjonen
        "500":
          description: Ukjent feilsituasjon har oppstått i Oppgave
      security:
      - oidc: []
  /api/v1/oppgaver/{id}:
    get:
      tags:
      - Oppgave
      summary: Hent en oppgave
      operationId: hentOppgave
      parameters:
      - name: X-Correlation-ID
        in: header
        description: UUID for feilsøk på tvers av tjenester
        required: true
        schema:
          type: string
        example: 26b40001-6e93-4678-8d90-f15a99941d52
      - name: id
        in: path
        description: Oppgaven som skal hentes
        required: true
        schema:
          type: integer
          format: int64
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Oppgave'
        "401":
          description: Konsument mangler gyldig token
        "403":
          description: Bruker er ikke autorisert for denne operasjonen
        "404":
          description: Fant ikke oppgave for gitt id
        "409":
          description: Konflikt
        "500":
          description: Ukjent feilsituasjon har oppstått i Oppgave
      security:
      - oidc: []
    patch:
      tags:
      - Oppgave
      summary: Endre en eksisterende oppgave
      description: Kun verdier som sendes med i requesten blir endret. Verdier kan
        nullstilles ved å eksplisitt sette disse til null
      operationId: patchOppgave
      parameters:
      - name: X-Correlation-ID
        in: header
        description: UUID for feilsøk på tvers av tjenester
        required: true
        schema:
          type: string
        example: 26b40001-6e93-4678-8d90-f15a99941d52
      - name: id
        in: path
        required: true
        schema:
          type: integer
          format: int64
      requestBody:
        description: "Eksempel på request for å ferdigstille en oppgave. For å se\
          \ tillatte felter, trykk på \"Schema\""
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchOppgaveRequest'
            example:
              versjon: "2"
              status: FERDIGSTILT
        required: true
      responses:
        "200":
          description: Oppgave med oppdaterte verdier
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Oppgave'
        "400":
          description: Ugyldig request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        "401":
          description: Konsument mangler gyldig token
        "403":
          description: Bruker er ikke autorisert for denne operasjonen
        "409":
          description: "Konflikt, i.e versjonen som sendes med er utdatert fordi noen\
            \ andre har endret oppgaven"
        "500":
          description: Ukjent feilsituasjon har oppstått i Oppgave
      security:
      - oidc: []
  /api/v2/enhet/{enhetsnr}/oppgaver/sok:
    post:
      summary: 'Under arbeid! Søk etter åpne oppgaver fordelt angitt enhet '
      operationId: finnOppgaver_1
      parameters:
      - name: X-Correlation-ID
        in: header
        description: UUID for feilsøk på tvers av tjenester. Påkrevd for konsumenter
          som ikke benytter otel
        schema:
          type: string
        example: 26b40001-6e93-4678-8d90-f15a99941d52
      - name: enhetsnr
        in: path
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Oppgavesok'
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SokOppgaverResponse'
        "400":
          description: Ugyldig input
        "401":
          description: Token er ugyldig
        "403":
          description: Bruker er ikke autorisert operasjonen
        "500":
          description: Ukjent feilsituasjon har oppstått i Oppgave
      security:
      - oidc: []
  /api/v2/enhet/{enhetsnr}/oppgaver/restanse:
    post:
      summary: 'Under arbeid! Restanse for oppgaver på angitt enhet '
      operationId: hentRestanse
      parameters:
      - name: X-Correlation-ID
        in: header
        description: UUID for feilsøk på tvers av tjenester. Påkrevd for konsumenter
          som ikke benytter otel
        schema:
          type: string
        example: 26b40001-6e93-4678-8d90-f15a99941d52
      - name: enhetsnr
        in: path
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Filter'
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SokOppgaverResponse'
        "400":
          description: Ugyldig input
        "401":
          description: Token er ugyldig
        "403":
          description: Bruker er ikke autorisert operasjonen
        "500":
          description: Ukjent feilsituasjon har oppstått i Oppgave
      security:
      - oidc: []
  /api/v2/enhet/{enhetsnr}/oppgaver/me/tildel:
    post:
      summary: 'Under arbeid! Søk etter åpne oppgaver fordelt angitt enhet '
      operationId: tildelMeg
      parameters:
      - name: X-Correlation-ID
        in: header
        description: UUID for feilsøk på tvers av tjenester. Påkrevd for konsumenter
          som ikke benytter otel
        schema:
          type: string
        example: 26b40001-6e93-4678-8d90-f15a99941d52
      - name: enhetsnr
        in: path
        required: true
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Koekriterier'
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SokOppgaverResponse'
        "400":
          description: Ugyldig input
        "401":
          description: Token er ugyldig
        "403":
          description: Bruker er ikke autorisert operasjonen
        "500":
          description: Ukjent feilsituasjon har oppstått i Oppgave
      security:
      - oidc: []
components:
  schemas:
    PubliserKafkahendelserRequest:
      type: object
      properties:
        oppgaveIder:
          type: array
          items:
            type: integer
            format: int64
    Tema:
      type: object
      properties:
        tema:
          type: string
        term:
          type: string
    Gjelder:
      type: object
      properties:
        behandlingstema:
          type: string
        behandlingstemaTerm:
          type: string
        behandlingstype:
          type: string
        behandlingstypeTerm:
          type: string
    Oppgavetype:
      required:
      - oppgavetype
      - term
      type: object
      properties:
        oppgavetype:
          type: string
        term:
          type: string
    KommentarJson:
      type: object
      properties:
        tekst:
          type: string
        registrertAv:
          type: string
        registrertAvEnhet:
          type: string
        registrertAvSystem:
          type: string
        registrertTidspunkt:
          type: string
          format: date-time
        legacy:
          type: boolean
    HentMapperResponse:
      type: object
      properties:
        antallTreffTotalt:
          type: integer
          description: Totalt antall mapper funnet med dette søket
          format: int64
        mapper:
          type: array
          description: Liste over mapper
          items:
            $ref: '#/components/schemas/Mappe'
    Mappe:
      required:
      - enhetsnr
      - navn
      - versjon
      type: object
      properties:
        id:
          type: integer
          description: Syntetisk id
          format: int64
          example: 123
        enhetsnr:
          maxLength: 4
          minLength: 4
          type: string
          description: Enheten mappen hører til
          example: "0100"
        navn:
          maxLength: 255
          minLength: 0
          type: string
          description: Mappenavn eller beskrivelse
          example: BIDRAG - Klar til behandling
        tema:
          maxLength: 255
          minLength: 0
          type: string
          description: Tema slik den er definert i felles kodeverk
          example: AAP
        versjon:
          type: integer
          description: "Brukes for å håndtere optimistisk låsing, hvor to brukere\
            \ har skrevet på samme mappe. Hver gang det gjøres endring på en mappe,\
            \ økes verdien av VERSJON med 1. Når en klient skal lagre til på en mappe,\
            \ sendes verdien av VERSJON mappen hadde da informasjon om mappen som\
            \ nå er endret ble hentet ut. Dersom verdien av VERSJON er endret, har\
            \ noen andre lagret mappen i mellomtiden, og mappen kan ikke lagres. 409\
            \ Conflict vil returneres fra tjenesten. Under oppretting av mappe trenger\
            \ man ikke å spesifisere noen verdi for dette feltet, mappen vil starte\
            \ på versjon 1"
          format: int32
          example: 1
        opprettetAv:
          type: string
          description: Hvilken bruker eller system som opprettet mappen
        endretAv:
          type: string
          description: Hvilken bruker eller system som endret mappen sist
        opprettetTidspunkt:
          type: string
          description: Opprettet tidspunkt iht. ISO-8601
          format: date-time
        endretTidspunkt:
          type: string
          description: Endret tidspunkt iht. ISO-8601
          format: date-time
    BrukerDto:
      type: object
      properties:
        ident:
          type: string
        type:
          type: string
          enum:
          - PERSON
          - ARBEIDSGIVER
          - SAMHANDLER
    Oppgave:
      required:
      - aktivDato
      - id
      - oppgavetype
      - prioritet
      - status
      - tema
      - tildeltEnhetsnr
      - versjon
      type: object
      properties:
        personident:
          type: string
          description: "ident for person, dvs. fnr, dnr, npid eller aktørid"
          writeOnly: true
          example: "12345678911"
        id:
          type: integer
          description: Syntetisk id
          format: int64
          example: 5436732
        tildeltEnhetsnr:
          maxLength: 4
          minLength: 4
          type: string
          description: Enheten oppgaven er tildelt
          example: "4488"
        endretAvEnhetsnr:
          maxLength: 4
          minLength: 4
          type: string
          description: Enheten som endret oppgaven
          example: "4488"
        opprettetAvEnhetsnr:
          maxLength: 4
          minLength: 4
          type: string
          description: Hvilken enhet som har opprettet oppgaven
          example: "0200"
        journalpostId:
          maxLength: 40
          minLength: 0
          type: string
          description: Id for en journalpostreferanse
          example: "84938201"
        behandlesAvApplikasjon:
          maxLength: 40
          minLength: 0
          type: string
          description: Hvilken applikasjon oppgaven skal behandles i
          example: FS22
        aktoerId:
          maxLength: 13
          minLength: 13
          type: string
          description: "Syntetisk id for en person, kan hentes fra PDL"
          example: "1234567891113"
        orgnr:
          maxLength: 9
          minLength: 0
          type: string
          description: Organisasjonsnummer. Bedriften oppgaven skal løses på vegne
            av
        tilordnetRessurs:
          maxLength: 7
          minLength: 0
          type: string
          description: NavIdent for ressursen som er tilordnet oppgaven.
        beskrivelse:
          type: string
          description: "MERK! Vi arbeider med å migrere bort fra ett stort tekstfelt\
            \ til strukturerte kommentarer + strukturert endringslogg. Bruken av feltet\
            \ er under utfasing i Gosys. Dersom ditt system benytter dette feltet\
            \ ber vi dere følge disse retningslinjene\n\n: 1. Beskrivelse som registreres\
            \ samtidig som oppgaven blir opprettet, skal _ikke_ ha header\n2. Når\
            \ beskrivelsen benyttes til status-oppdateringer, kommentarer etc i etterkant\
            \ så skal header på følgende format benyttes, og legges til foran den\
            \ eksisterende beskrivelsen:  --- dd.MM.yyyy <navn på ansatt> (<navident/systemnavn>,\
            \ <enhet endringen utføres på vegne av>)\\n\\n\n3. Ta i bruk kommentar-feltet\
            \ for å registrere kommentarer fra saksbehandlere og/eller automatiske\
            \ oppdateringer i tillegg til beskrivelsen, samt gi oss beskjed om at\
            \ dette er gjort. Kommentaren skal _ikke_ ha headerLegacyfelt som benyttes\
            \ til mye forskjellig. For å ivareta bakoverkompatibilitet, må konsumenter\
            \ som ønsker at beskrivelseshistorikken skal være synlig i andre skjermbilder\
            \ enn så lenge fortsette å benytte dette "
        tema:
          maxLength: 255
          minLength: 0
          type: string
          description: Kategorisering av oppgaven. Hvilket tema/fagområde oppgaven
            tilhører
          example: AAP
        behandlingstema:
          maxLength: 255
          minLength: 0
          type: string
          description: "Kategoriserer oppgaven innenfor angitt tema. Som hovedregel\
            \ skal det alltid angis enten behandlingstema, behandlingstype eller begge.\
            \ Tillatte verdier er begrenset per tema, og endringer avklares med fagansvarlig/styringsenhet\
            \ for området. Se /api/v1/kodeverk/gjelder/{tema}"
          example: ab0203
        oppgavetype:
          maxLength: 255
          minLength: 0
          type: string
          description: Kategorisering av hva slags oppgavetype det er. Hvilke oppgavetyper
            som er tillatt for et gitt tema er definert i oppgavekodeverket.
          example: JFR
        behandlingstype:
          maxLength: 255
          minLength: 0
          type: string
          description: "Kategoriserer oppgaven innenfor angitt tema. Som hovedregel\
            \ skal det alltid angis enten behandlingstema, behandlingstype eller begge.\
            \ Tillatte verdier er begrenset per tema, og endringer avklares med fagansvarlig/styringsenhet\
            \ for området. Se /api/v1/kodeverk/gjelder/{tema}"
          example: ae0001
        versjon:
          type: integer
          description: "Brukes for å håndtere optimistisk låsing, hvor to brukere\
            \ har skrevet på samme oppgave. Hver gang det gjøres til på en oppgave,\
            \ økes verdien av VERSJON med 1. Når en klient skal lagre til på en oppgave,\
            \ sendes verdien av VERSJON oppgaven hadde da informasjon om oppgaven\
            \ som nå er endret ble hentet ut. Dersom verdien av VERSJON er endret,\
            \ har noen andre lagret oppgaven i mellomtiden, og oppgaven kan ikke lagres.\
            \ 409 Conflict vil returneres fra tjenesten. Under oppretting av oppgave\
            \ trenger man ikke å spesifisere noen verdi for dette feltet, oppgaven\
            \ vil starte på versjon 1"
          format: int32
          example: 1
        mappeId:
          type: integer
          description: 'Hvilken mappe oppgaven er plassert i. Mapper administreres
            av den enkelte enhet. Mapper tilknyttet enheten hentes via eget endepunkt '
          format: int64
          example: 848
        opprettetAv:
          type: string
          description: Hvilken bruker eller system som opprettet oppgaven
          example: Z999999
        endretAv:
          type: string
          description: Hvilken bruker eller system som endret oppgaven sist
          example: Z998888
        prioritet:
          type: string
          description: Angir hvilken prioritet oppgaven har
          example: NORM
          enum:
          - HOY
          - NORM
          - LAV
        status:
          type: string
          description: Hvilken status oppgaven har. Konsumenter bør kun forholde seg
            til dette ved behov for å skille mellom ferdigstilt og feilregistrert
          example: OPPRETTET
          enum:
          - OPPRETTET
          - AAPNET
          - UNDER_BEHANDLING
          - FERDIGSTILT
          - FEILREGISTRERT
        fristFerdigstillelse:
          type: string
          description: Oppgavens frist for ferdigstillelse.
          format: date
        aktivDato:
          type: string
          description: "Angir når det er relevant å ta tak i oppgaven. Settes normalt\
            \ til samme dato som oppgaven opprettes, men endres fremover i tid dersom\
            \ oppgaven f.eks settes på vent. I Gosys vil oppgaver på vent som standard\
            \ skjules, men kan hente frem om ønskelig"
          format: date
        opprettetTidspunkt:
          type: string
          description: Opprettet tidspunkt iht. ISO-8601
          format: date-time
        ferdigstiltTidspunkt:
          type: string
          description: Tidspunktet oppgaven ble ferdigstilt iht. ISO-8601
          format: date-time
        endretTidspunkt:
          type: string
          description: Tidspunktet oppgaven sist ble endret iht. ISO-8601
          format: date-time
        bruker:
          $ref: '#/components/schemas/BrukerDto'
      description: Liste over oppgaver
    SokOppgaverResponse:
      type: object
      properties:
        antallTreffTotalt:
          type: integer
          description: Totalt antall oppgaver funnet med dette søket
          format: int64
        oppgaver:
          type: array
          description: Liste over oppgaver
          items:
            $ref: '#/components/schemas/Oppgave'
    HendelseJson:
      type: object
      properties:
        oppgaveId:
          type: integer
          format: int64
        utfortAv:
          type: string
        tildeltEnhetsnr:
          type: string
        mappeId:
          type: integer
          format: int64
        tilordnetRessurs:
          type: string
        status:
          type: string
        tema:
          type: string
        oppgavetype:
          type: string
        tidspunkt:
          type: string
          format: date-time
        utfortAvEnhetsnr:
          type: string
        hendelsestype:
          type: string
          enum:
          - OPPGAVE_OPPRETTET
          - OPPGAVE_ENDRET
          - OPPGAVE_FERDIGSTILT
          - OPPGAVE_FEILREGISTRERT
        behandlingstema:
          type: string
        behandlingstype:
          type: string
        fristFerdigstillelse:
          type: string
          format: date
        aktivDato:
          type: string
          format: date
        prioritet:
          type: string
          enum:
          - HOY
          - NORM
          - LAV
        journalpostId:
          type: string
        saksreferanse:
          type: string
        utfortFraSystem:
          type: string
    ErrorResponse:
      type: object
      properties:
        uuid:
          type: string
        feilmelding:
          type: string
    OpprettOppgaveRequest:
      required:
      - aktivDato
      - oppgavetype
      - prioritet
      - tema
      type: object
      properties:
        aktoerId:
          type: string
        personident:
          maxLength: 13
          minLength: 11
          type: string
          description: "ident for person oppgaven knyttes mot, dvs. fnr, dnr, npid\
            \ eller aktørid, Kan kun knyttes mot én bruker"
          example: "12345678911"
        orgnr:
          maxLength: 9
          minLength: 0
          type: string
          description: Organisasjonsnummer oppgaven knyttes mot. Kan kun knyttes mot
            én bruker
          example: "979312059"
        tildeltEnhetsnr:
          maxLength: 4
          minLength: 4
          type: string
          description: "Enheten oppgaven tildeles. Dersom enhet ikke er angitt, så\
            \ vil oppgaven automatisk bli forsøkt fordeling iht. standard arbeidsfordelingsregler\
            \ (se norg2)"
          example: "4820"
        opprettetAvEnhetsnr:
          maxLength: 4
          minLength: 4
          type: string
          description: Hvilken enhet som har opprettet oppgaven. Skal alltid angis
            dersom oppgaven registreres av en medarbeider
          example: "4820"
        journalpostId:
          maxLength: 40
          minLength: 0
          type: string
          description: "Id for en journalpostreferanse. Benyttes når oppgaven skal\
            \ kobles mot journalposter, i.e for journalføringsoppgaver"
          example: "84938201"
        behandlesAvApplikasjon:
          maxLength: 40
          minLength: 0
          type: string
          description: Indikerer hvilken applikasjon oppgaven skal behandles i. Hvis
            angitt vil dette begrense hva man kan endre på av oppgaven i Gosys
          example: FS22
        beskrivelse:
          type: string
          description: "Kort tekstlig beskrivelse av oppgaven. Vennligst overhold\
            \ følgende retningslinjer 1. Det skal ikke benyttes header (unngå alle\
            \ varianter av --- dd.mm.yyyy (XXXXXX, <enhetsnr>) --- 2. Skal ikke væ\
            re nødvendig informasjon for saksbehandlere til å finne riktig oppgave\
            \ i en liste. Til dette skal tema, oppgavetype, behandlingstema, behandlingstype\
            \ benyttes 3. Unngå personsensitiv og/eller lokaliserende informasjon,\
            \ da dette feltet enn så lenge presenteres i en god del arbeidslister\
            \ i eldre systemer"
        tema:
          maxLength: 255
          minLength: 0
          type: string
          description: Tema for oppgaven
          example: KON
        behandlingstema:
          maxLength: 255
          minLength: 0
          type: string
          description: Kategorisering av oppgaven. Som hovedregel skal alltid minst
            en av behandlingstema og/eller behandlingstype være angitt. Må være tillatt
            for det aktuelle temaet og i kombinasjon med en ev. behandlingstype. Se
            api for kodeverk
          example: ab0335
        oppgavetype:
          maxLength: 255
          minLength: 0
          type: string
          description: Kategorisering av oppgaven. Må være tillatt for det aktuelle
            temaet. Se api for kodeverk
          example: JFR
        behandlingstype:
          maxLength: 255
          minLength: 0
          type: string
          description: Kategorisering av oppgaven. Som hovedregel skal alltid minst
            en av behanlingstema og/eller behandlingstype være angitt. Må være tillatt
            for det aktuelle temaet og i kombinasjon med et ev. behandlingstema. Se
            api for kodeverk
          example: ae0034
        aktivDato:
          type: string
          description: "Benyttes for å legge en oppgave \"på vent\". Sette normalt\
            \ til dagens dato for nye oppgaver. Styrer visning i arbeidsflater, der\
            \ oppgaver med dato <= dagens dato vises."
          format: date
        fristFerdigstillelse:
          type: string
          description: Oppgavens frist for ferdigstillelse.
          format: date
        samhandlernr:
          type: string
          description: Samhandlernr for oppgaven
        prioritet:
          type: string
          description: Hvilken prioritet oppgaven skal ha
          example: NORM
          enum:
          - HOY
          - NORM
          - LAV
    JsonNode:
      type: object
    PatchOppgaveRequest:
      required:
      - versjon
      type: object
      properties:
        versjon:
          type: integer
          description: Nåværende versjon på oppgaven
          format: int32
          example: 1
        orgnr:
          type: string
          description: "Organisasjonsnummer. Kan ikke nullstilles, men kan endres\
            \ til personident. Merk at det kun er i helt spesielle tilfeller ident\
            \ skal endres, i.e ifm journalføring. Kun én av personident eller orgnr\
            \ kan angis"
          example: "979312059"
        status:
          type: string
          description: Hvilken status oppgaven skal få
          example: FERDIGSTILT
          enum:
          - OPPRETTET
          - AAPNET
          - UNDER_BEHANDLING
          - FERDIGSTILT
          - FEILREGISTRERT
        endretAvEnhetsnr:
          maxLength: 4
          minLength: 4
          type: string
          description: "Enhet (eller virtuell enhet, ref. norg2) saksbehandler representerer\
            \ når endringen utføres. For maskinelle prosesser settes denne til 9999\
            \ eller nullstilles"
          example: "2990"
        tilordnetRessurs:
          type: string
          description: Navident for ressursen som skal tildeles oppgaven
          example: Z998323
        tildeltEnhetsnr:
          type: string
          description: Enheten oppgaven skal tildeles
          example: "4488"
        prioritet:
          type: string
          description: Hvilken prioritet oppgaven skal få
          example: HOY
          enum:
          - HOY
          - NORM
          - LAV
        behandlingstema:
          maxLength: 7
          minLength: 0
          type: string
          description: Kategorisering av oppgaven. Må være tillatt for det aktuelle
            temaet og i kombinasjon med en ev. behandlingstype. Se api for kodeverk
          example: ab0203
        behandlingstype:
          maxLength: 7
          minLength: 0
          type: string
          description: Kategorisering av oppgaven. Må være tillatt for det aktuelle
            temaet og i kombinasjon med et ev. behandlingstema. Se api for kodeverk
          example: ae0001
        fristFerdigstillelse:
          type: string
          description: Oppgavens frist for ferdigstillelse.
          format: date
          example: 2018-03-24
        aktivDato:
          type: string
          description: "Benyttes for å legge en oppgave \"på vent\". Styrer visning\
            \ i arbeidsflater, der oppgaver med dato <= dagens dato vises."
          format: date
          example: 2018-03-10
        oppgavetype:
          maxLength: 20
          minLength: 0
          type: string
          description: Mer presis kategorisering av oppgaven. Må være tillatt for
            det aktuelle temaet. Se api for kodeverk
          example: JFR
        tema:
          maxLength: 3
          minLength: 0
          type: string
          description: Tema (fagområde) for oppgaven
          example: AAP
        journalpostId:
          type: string
          description: Angis for å knytte oppgaven til en journalpost i arkivet
          example: "84938201"
        saksreferanse:
          type: string
          description: Angis for å knytte oppgaven til en sak i et fagsystem
          example: "11231123"
        behandlesAvApplikasjon:
          maxLength: 40
          minLength: 0
          type: string
          description: Angis for å indikere hvilken applikasjon oppgaven skal behandles
            i
          example: FS22
        kommentar:
          $ref: '#/components/schemas/RegistrerKommentarJson'
        beskrivelse:
          type: string
        personident:
          maxLength: 13
          minLength: 11
          type: string
          description: "ident for person oppgaven gjelder, dvs. fnr, dnr, npid eller\
            \ aktørid. Kan ikke nullstilles. Kun én av personident eller orgnr kan\
            \ angis. Merk at det kun er i helt spesielle tilfeller ident skal endres,\
            \ i.e ifm journalføring"
          example: "12345678911"
    RegistrerKommentarJson:
      type: object
      properties:
        tekst:
          type: string
        automatiskGenerert:
          type: boolean
          description: "Skal settes til true dersom kommentaren er automatisk generert\
            \ av et system, og det benyttes OBO-token. Ignoreres ved CCF"
      description: Kommentar i tilknytning til endringer. Hensyntas kun ved patch
      example: "Avventer dokumentasjon, lagt på vent til 25.01"
    Filter:
      type: object
      properties:
        tema:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/Kodeverkskode'
        oppgavetype:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/Kodeverkskode'
        kategorisering:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/Kategorisering'
        nokkelord:
          uniqueItems: true
          type: array
          items:
            type: string
        mappe:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/IdKriterie'
        prioritet:
          uniqueItems: true
          type: array
          items:
            type: string
            enum:
            - LAV
            - NORMAL
            - HOY
        frist:
          $ref: '#/components/schemas/Periode'
        opprettet:
          $ref: '#/components/schemas/Periode'
        identStartsWith:
          uniqueItems: true
          type: array
          items:
            type: string
        medarbeiderfordeling:
          type: string
          enum:
          - FORDELT
          - IKKE_FORDELT
        ventestatus:
          type: string
          enum:
          - SATT_PAA_VENT
          - IKKE_SATT_PAA_VENT
    IdKriterie:
      type: object
      properties:
        id:
          type: integer
          format: int64
    Kategorisering:
      type: object
      properties:
        tema:
          $ref: '#/components/schemas/Kodeverkskode'
        oppgavetype:
          $ref: '#/components/schemas/Kodeverkskode'
        behandlingstema:
          $ref: '#/components/schemas/NullbarKodeverkskode'
        behandlingstype:
          $ref: '#/components/schemas/NullbarKodeverkskode'
    Kodeverkskode:
      required:
      - kode
      type: object
      properties:
        kode:
          type: string
    NullbarKodeverkskode:
      type: object
      properties:
        kode:
          type: string
    Oppgavesok:
      type: object
      properties:
        filter:
          $ref: '#/components/schemas/Filter'
        paginering:
          $ref: '#/components/schemas/Paginering'
        sortering:
          $ref: '#/components/schemas/Sortering'
    Paginering:
      type: object
      properties:
        antall:
          type: integer
          format: int32
        nestePeker:
          type: string
    Periode:
      type: object
      properties:
        fra:
          type: string
          format: date
        til:
          type: string
          format: date
    Sortering:
      type: object
      properties:
        felt:
          type: string
          enum:
          - FRIST
          - OPPRETTET
        rekkefolge:
          type: string
          enum:
          - ELDSTE_FORST
          - NYESTE_FORST
    Koefilter:
      type: object
      properties:
        tema:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/Kodeverkskode'
        oppgavetype:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/Kodeverkskode'
        kategorisering:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/Kategorisering'
        nokkelord:
          uniqueItems: true
          type: array
          items:
            type: string
        mappe:
          uniqueItems: true
          type: array
          items:
            $ref: '#/components/schemas/IdKriterie'
        prioritet:
          uniqueItems: true
          type: array
          items:
            type: string
            enum:
            - LAV
            - NORMAL
            - HOY
        frist:
          $ref: '#/components/schemas/Periode'
        opprettet:
          $ref: '#/components/schemas/Periode'
        identStartsWith:
          uniqueItems: true
          type: array
          items:
            type: string
    Koekriterier:
      type: object
      properties:
        koefilter:
          $ref: '#/components/schemas/Koefilter'
        sortering:
          $ref: '#/components/schemas/Sortering'
        antallOppgaver:
          type: integer
          format: int64
        tildelingskriterie:
          type: string
          enum:
          - PRIORITERT_REKKEFOLGE
          - GEOGRAFI
          - BRUKER
  securitySchemes:
    oidc:
      type: http
      description: "OIDC-token (JWT via OAuth2.0). Vi støtter CCF og OBO (Azure) for\
        \ nye konsumenter, samt nais-sts for eksisterende konsumenter som ikke enda\
        \ har hatt mulighet til å ta i bruk Azure CCF"
      scheme: bearer
